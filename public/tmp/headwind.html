<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vici.org kaartvoorbeeld</title>
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        a {
            color: inherit;
            text-decoration: inherit;
        }

        p {
            margin: 0;
        }

        img {
            display: block;
        }

        html,
        body {
            margin: 0;
            padding: 0;
            height: auto;
            min-height: 100dvh;
            overflow-x: hidden;
            overflow-y: auto;
            font-family: sans-serif;
            font-size: 16px;
            line-height: 1.5;
        }

        header {
            height: 3rem;
            flex-shrink: 0;
            background-color: white;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        header div {
            color: #1e3a8a;
            font-weight: 700;
            font-size: 1.25rem;
            line-height: 1.75rem;
            display: flex;
            align-items: center;
        }

        header .subtitle {
            font-size: 0.875rem;
            font-weight: 400;
            color: #718096;
            max-width: 180px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            display: inline-block;
            padding-left: 0.5rem;
        }

        #menu-button {
            display: block;
            color: #1e3a8a;
            font-size: 1.5rem;
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }

        #main-menu {
            display: none;
            color: #1e3a8a;
            font-weight: 500;
        }

        #main-menu a {
            margin-left: 1rem;
        }

        #main-menu a:first-child {
            margin-left: 0;
        }

        #main-menu a:hover {
            text-decoration: underline;
        }

        #main-menu input {
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
            font-size: 0.875rem;
        }


        #mobile-menu {
            display: none;
            padding: 1rem;
            flex-direction: column;
            gap: 0.5rem;
        }

        #mobile-menu>*+* {
            margin-top: 0.5rem;
        }


        #mobile-menu a {
            display: block;
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
            color: #1a365d;
        }

        #mobile-menu input {
            width: 100%;
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }


        main {
            display: flex;
            flex: none;
            height: calc(100dvh - 5.5rem);
        }

        #map {
            flex: 1;
            min-height: 300px;
        }

        .highlights-column {
            width: 100%;
            height: 100%;
            min-width: 240px;
            display: flex;
            flex-direction: column;
            background: white;
        }


        .highlights-content {
            padding: 0 0.5rem 0.5rem 0.5rem;
        }

        .highlights-scroll {
            overflow-y: auto;
            flex-grow: 1;
            min-height: 0;
            display: flex;
            flex-direction: column;
        }

        #selectionbox-content {
            padding: 0.5rem;
        }

        h2 {
            font-weight: 500;
            font-size: 1.25rem;
            line-height: 1.75rem;
            margin-bottom: 0.5rem;
            color: #1e3a8a;
        }

        .relative {
            position: relative;
        }

        .absolute {
            position: absolute;
        }

        .font-semibold {
            font-weight: 600;
        }

        .text-white {
            color: white;
        }

        .underline {
            text-decoration: underline;
        }

        .space-x-4 > * + * {
            margin-left: 1rem;
        }

        .space-y-3 > * + * {
            margin-top: 0.75rem;
        }


        .highlight-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .centered-flex {
            display: flex;
            align-items: center;
        }

        .highlight-image {
            width: 100%;
            border-top-left-radius: 0.25rem;
            border-top-right-radius: 0.25rem;
        }

        .selection-overlay {
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 0.5rem;
        }

        .selection-overlay-content {
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            gap: 0.5rem;
            color: white;
        }

        .selection-no-image {
            background-color: #374151;
            padding: 0.75rem;
            border-radius: 0.25rem;
        }

        .empty-message {
            padding: 0.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .highlight-box {
            background-color: #f3f4f6;
            border-radius: 0.25rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }

        .highlight-info {
            padding: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            gap: 0.5rem;
        }

        footer {
            font-size: 0.875rem;
            color: #718096;
            /* max-width: 768px;  */
            margin-left: auto;
            margin-right: auto;
            margin-top: 0.5rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }

        .footerbox {
            border-top: 1px solid rgb(209, 213, 219);
            padding-top: 0.25rem;
        }

        #footerhead {
            text-align: center;
            font-weight: 600;
            padding-bottom: 0.5rem;
            cursor: pointer;
        }

        .footercontent {
            margin-top: 0.5rem;
        }

        .footerline {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .footer-logo {
            width: 1.25rem;
            height: 1.25rem;
        }

        .footer-logolink {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .languageselector {
            display: flex;
            justify-content: center;
        }

        @media (min-width: 768px) {
            #menu-button {
                display: none;
            }

            #main-menu {
                display: flex;
                align-items: center;
            }

            #mobile-menu {
                display: none !important;
            }

            .highlights-column {
                width: 25%;
            }

            #selectionbox-content {
                padding-top: 0;
                padding-left: 0.5rem;
                padding-right: 0.5rem;
                padding-bottom: 0.5rem;
            }
        }

        @media (max-width: 768px) {
            main {
                flex-direction: column;
                height: auto;
            }

            #map {
                max-height: 350px;
            }
        }

        .marker-icon {
            background-image: url('/images/markers.png');
            background-size: auto;
            width: 32px;
            height: 37px;
            background-position: 0 0;
        }

        .marker-icon[data-icon-type="1"] {
            background-position-x: -0px;
        }

        .marker-icon[data-icon-type="2"] {
            background-position-x: -32px;
        }

        .marker-icon[data-icon-type="3"] {
            background-position-x: -64px;
        }

        .marker-icon[data-icon-type="4"] {
            background-position-x: -96px;
        }

        .marker-icon[data-icon-type="5"] {
            background-position-x: -128px;
        }

        .marker-icon[data-icon-type="6"] {
            background-position-x: -160px;
        }

        .marker-icon[data-icon-type="7"] {
            background-position-x: -192px;
        }

        .marker-icon[data-icon-type="8"] {
            background-position-x: -224px;
        }

        .marker-icon[data-icon-type="9"] {
            background-position-x: -256px;
        }

        .marker-icon[data-icon-type="10"] {
            background-position-x: -288px;
        }

        .marker-icon[data-icon-type="11"] {
            background-position-x: -320px;
        }

        .marker-icon[data-icon-type="12"] {
            background-position-x: -352px;
        }

        .marker-icon[data-icon-type="13"] {
            background-position-x: -384px;
        }

        .marker-icon[data-icon-type="14"] {
            background-position-x: -416px;
        }

        .marker-icon[data-icon-type="15"] {
            background-position-x: -448px;
        }

        .marker-icon[data-icon-type="16"] {
            background-position-x: -480px;
        }

        .marker-icon[data-icon-type="17"] {
            background-position-x: -512px;
        }

        .marker-icon[data-icon-type="18"] {
            background-position-x: -544px;
        }

        .marker-icon[data-icon-type="19"] {
            background-position-x: -576px;
        }

        .marker-icon[data-icon-type="20"] {
            background-position-x: -608px;
        }

        .marker-icon[data-icon-type="21"] {
            background-position-x: -640px;
        }

        .marker-icon[data-icon-type="22"] {
            background-position-x: -672px;
        }

        .marker-icon[data-icon-type="23"] {
            background-position-x: -704px;
        }

        .marker-icon[data-icon-type="24"] {
            background-position-x: -736px;
        }

        .marker-icon[data-icon-type="25"] {
            background-position-x: -768px;
        }
    </style>
    <script src="/js/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="/js/ol/v4.6.5/css/ol.css" type="text/css">
    <script src="/js/ol/v4.6.5/ol.js"></script>
    <script src="/js/vici.js?version=20250611"></script>

</head>

<body>
    <script>
        var mapObj;

        function iconHtml(icon_type) {
            const title = [];

            title[1] = 'An aqueduct'
            title[2] = 'A bath or a bathcomplex'
            title[3] = 'A city'
            title[4] = 'A castle or a major military defensive structure'
            title[5] = 'A grave or a burial field'
            title[6] = 'A workshop or an industry'
            title[7] = 'A tavern or a relay'
            title[8] = 'A museum (contemporary)'
            title[9] = 'A village like a vicus or a canabae'
            title[10] = 'The site of a shipwreck'
            title[11] = 'A temple or a sanctuary'
            title[12] = 'A theatre or an amphitheatre'
            title[13] = 'A rural villa or major farm'
            title[14] = 'A rural settlement'
            title[15] = 'A watchtower'
            title[16] = 'A relief, votiv stone or altar'
            title[17] = 'An archaeological find'
            title[18] = 'An archaeological observation'
            title[19] = 'A memorial or replica (contemporary)'
            title[20] = 'A milestone'
            title[21] = 'A building'
            title[22] = 'A bridge'
            title[23] = 'A road'
            title[24] = 'The site of a historic event'
            title[25] = 'A temporary military camp'

            const iconTitle = title[icon_type] || 'unknown';
            return `<div class="marker-icon" data-icon-type="${icon_type}" title="${iconTitle}"></div>`
        }

        function updateSelectionBox(feature) {
            const selectionBox = document.getElementById('selectionbox-content');
            if (feature === null || feature === undefined) {
                selectionBox.innerHTML = '';
                return;
            }

            const title = feature.title || 'Onbekende locatie';
            const summary = feature.html || '';
            const id = feature.id || '';
            const hasImage = feature.picture && feature.picture !== '';

            let selectionHTML = '';
            if (hasImage) {
                const imageUrl = `https://images.vici.org/crop/w220xh124${feature.picture}`;
                selectionHTML = `
                    <div class="relative">
                        <img src="${imageUrl}" loading="lazy" class="highlight-image" alt="${title}" />
                        <div class="absolute selection-overlay">
                            <div class="selection-overlay-content">
                                <div>
                                    <div class="font-semibold">${title}</div>
                                    <p>${summary} ${id ? `[&nbsp;<a href="/vici/${id}" class="underline">more</a>&nbsp;]` : ''}</p>
                                </div>
                                <div class="centered-flex">
                                    ${iconHtml(feature.kind || 1)}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                selectionHTML = `
                    <div class="selection-no-image">
                        <div class="selection-overlay-content">
                            <div>
                                <div class="font-semibold">${title}</div>
                                <p>${summary} ${id ? `[<a href="/vici/${id}" class="underline">more</a>]` : ''}</p>
                            </div>
                            <div class="centered-flex">
                                ${iconHtml(feature.kind || 1)}
                            </div>
                        </div>
                    </div>
                `;
            }
            selectionBox.innerHTML = selectionHTML;

            // Scroll de highlights-scroll div naar boven
            const highlightsScroll = document.querySelector('.highlights-scroll');
            if (highlightsScroll) {
                highlightsScroll.scrollTop = 0;
            }
        }

        function updateHighlightsBox(highlights) {
            const highlightsContainer = document.getElementById('highlights-items');

            if (!highlights || highlights.length === 0) {
                highlightsContainer.innerHTML = '<div class="empty-message">Geen uitgelichte items beschikbaar.</div>';
                return;
            }

            let highlightHTML = '';
            for (let i = 0; i < highlights.length; i++) {
                const highlight = highlights[i];
                const title = highlight.properties.title || 'Onbekende locatie';
                const summary = highlight.properties.summary || '';
                const imageUrl = highlight.properties.img
                    ? `https://images.vici.org/crop/w220xh124${highlight.properties.img}`
                    : 'https://images.vici.org/crop/w220xh124/uploads/no_image.png';
                const id = highlight.properties.id || '';

                highlightHTML += `
                <div class="highlight-box">
                    <img src="${imageUrl}" class="highlight-image" alt="${title}" />
                    <div class="highlight-info">
                        <div class="highlight-content">
                            <div class="font-semibold">${title}</div>
                            <div>
                                ${summary}
                                ${id ? `<a href="javascript:void(0)" onclick="mapObj.selectMarkerAndPan('${id}'); return false;" class="underline">[show on map]</a>` : ''}</div>
                        </div>
                        <div class="centered-flex">
                            ${iconHtml(highlight.properties.kind || 1)}
                        </div>
                    </div>
                </div>`;

            }
            highlightsContainer.innerHTML = highlightHTML;
        }
    </script>
    <script>
        $(document).ready(function () {
            mapObj = new ViciWidget('map',
                {
                    defaultMap: "OSM",
                    useMaps: ["AWMC", "OSM", "DARE", "ESRI"],
                    extraMaps: {
                        DARE: {
                            name: 'Digital Atlas of the Roman Empire',
                            url: "https://tiles.vici.org/imperium/{z}/{x}/{y}.png",
                            attributions: '© <a href="http://dare.ht.lu.se/">Johan Åhlfeldt</a>',
                            maxZoom: 11
                        },
                        ESRI: {
                            name: 'Esri WorldImagery',
                            url: "https://tiles.vici.org/world/{z}/{y}/{x}",
                            attributions: 'Tiles © Esri &mdash; and the GIS User Community'
                        }
                    },
                    extraOverlays: {
                        LIMESNL: {
                            name: 'Limes NL',
                            url: "https://tiles.vici.org/Limes/{z}/{x}/{y}.png",
                            attributions: '© Olav Odé - CC BY',
                            opacity: 0.8
                        }
                    },

                    viciToken: '20E2ADF5AB',
                    showFilter: true,
                    highlights: 6,
                    lang: "nl",
                    setUrl: true,
                    showScale: "metric",
                    moveHere: true,
                    highlightFunc: updateHighlightsBox,
                    selectionFunc: updateSelectionBox
                }
            );
        });
    </script>

    <header>
        <div>Vici.org<span class="subtitle">:: archeologische atlas</span></div>
        <button id="menu-button">&#9776;</button>
        <nav id="main-menu">
            <input type="text" placeholder="Zoeken..." />
            <a href="#">Toevoegen</a>
            <a href="#">Login / Registreer</a>
        </nav>
    </header>

    <div id="mobile-menu">
        <a href="#">Toevoegen</a>
        <a href="#">Login / Register</a>
        <input type="text" placeholder="Zoeken..." />
    </div>

    <main>
        <div id="map"></div>

        <div class="highlights-column">
            <div class="highlights-scroll">
                <div id="selectionbox-content">
                    <!-- selection -->
                </div>
                <div class="highlights-content">
                    <h2>Uitgelicht</h2>
                    <div id="highlights-items" class="space-y-3">
                        <!-- highlights -->
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer id="footer">
        <div class="footerbox">
            <div id="footerhead">Meer over Vici.org <span id="footer-arrow">↓</span></div>
            <div class="footercontent">
                <div class="footerline">
                    <a href="/new.php" class="flex items-center gap-2">Nieuw op Vici.org</a>
                    <a href="/changed.php" class="flex items-center gap-2">Laatste wijzigingen</a>
                    <a href="/about.php" class="flex items-center gap-2">Over Vici.org</a>
                </div>
                <div class="footerline">
                    <a href="https://github.com/renevoorburg/vici.org" class="footer-logolink">
                        <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
                            class="footer-logo" alt="GitHub" />
                        GitHub
                    </a>
                    <a href="https://mastodon.social/@vici" class="footer-logolink">
                        <img src="https://joinmastodon.org/logos/logo-purple.svg" class="footer-logo" alt="Mastodon" />
                        Mastodon
                    </a>
                    <a href="https://livius.org" class="footer-logolink">
                        <img src="https://www.livius.org/favicon.ico" class="footer-logo" alt="Livius" />
                        Livius.org
                    </a>
                </div>
                <div class="languageselector space-x-4">
                    <a href="#">NL</a><a href="#">DE</a><a href="#">FR</a><a href="#">EN</a>
                </div>
            </div>
        </div>
    </footer>


    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (menu.style.display === 'none' || menu.style.display === '') {
                menu.style.display = 'flex';
            } else {
                menu.style.display = 'none';
            }
        }
        document.getElementById('menu-button').addEventListener('click', toggleMobileMenu);

        let isAtFooter = false;

        function toggleFooter() {
            const footer = document.getElementById('footer');
            const footerArrow = document.getElementById('footer-arrow');

            if (isAtFooter) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                footerArrow.textContent = '↓';
                isAtFooter = false;
            } else {
                footer.scrollIntoView({ behavior: 'smooth' });
                footerArrow.textContent = '↑';
                isAtFooter = true;
            }
        }
        document.getElementById('footerhead').addEventListener('click', toggleFooter);
    </script>
</body>

</html>